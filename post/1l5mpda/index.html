<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><title>Post — 1l5mpda</title><meta name="viewport" content="width=device-width, initial-scale=1"><!-- ✅ CSS path now robust in dev and on GitHub Pages --><link rel="stylesheet" href="/Saved-Reddit/styles/global.css"><!-- Speed up first image connection setup --><link rel="preconnect" href="https://preview.redd.it" crossorigin><link rel="preconnect" href="https://i.redd.it" crossorigin></head> <body> <script data-base="/Saved-Reddit/">
        (function(){
          try {
            // Read the base from the script's data attribute (no JSON stringify needed)
            var BASE = (document.currentScript && document.currentScript.dataset && document.currentScript.dataset.base) || '/';
            var norm = function(s){ return s.endsWith('/') ? s : s + '/'; };
            var isLogin = norm(location.pathname).endsWith(norm(BASE + 'login'));
            var authed = (sessionStorage.getItem('authed') === '1');
            if (!isLogin && !authed) location.replace(BASE + 'login');
          } catch (e) {}
        })();
      </script>  <!-- add id so we can measure --><header id="siteHeader" class> <div class="bar container">  <div class="brand"><a href="/Saved-Reddit/">Saved Reddit</a></div> <div class="spacer"></div> <a class="button" href="/Saved-Reddit/favorites" aria-label="Favorites">⭐</a>  </div>  </header> <!-- Minimal client helpers: open drawer + live chips --> <script>
    (function () {
        if (typeof window === "undefined") return;

        // Shared default: 'created' sorts DESC by default, everything else ASC
        function defaultDirForSort(sort) {
            return sort === "created" ? "desc" : "asc";
        }
        function canonicalizeDirParam() {
            const sp = new URLSearchParams(location.search);
            const sort = sp.get("sort") || "saved";
            const def = defaultDirForSort(sort);
            const dir = sp.get("dir");
            if (dir && dir === def) {
                sp.delete("dir");
                const url = new URL(location.href);
                url.search = sp.toString();
                history.replaceState({}, "", url);
                window.dispatchEvent(new Event("urlchange"));
            }
        }

        // Open filter drawer from header button
        const btn = document.getElementById("openFilters");
        btn &&
            btn.addEventListener("click", () => {
                window.dispatchEvent(new CustomEvent("filters:open"));
            });

        // Chips rendering from URL params
        const chipsEl = document.getElementById("activeChips");
        if (!chipsEl) return;

        const listParams = ["subs", "authors", "flairs", "media", "domains"];

        function parseLists(sp) {
            const out = {};
            for (const k of listParams) {
                const v = sp.get(k) || "";
                out[k] = v
                    ? v.split(",").map(decodeURIComponent).filter(Boolean)
                    : [];
            }
            return out;
        }

        function badgeLabel(k) {
            switch (k) {
                case "subs":
                    return "r/";
                case "authors":
                    return "u/";
                case "flairs":
                    return "";
                case "media":
                    return "";
                case "domains":
                    return "";
                default:
                    return "";
            }
        }

        function renderChips() {
            const sp = new URLSearchParams(location.search);
            const lists = parseLists(sp);
            const fr = document.createDocumentFragment();
            let count = 0;

            for (const k of listParams) {
                for (const val of lists[k]) {
                    count++;
                    const chip = document.createElement("span");
                    chip.className = "chip";
                    chip.textContent = `${badgeLabel(k)}${val} `;
                    const x = document.createElement("span");
                    x.className = "x";
                    x.textContent = "✕";
                    x.setAttribute("role", "button");
                    x.addEventListener("click", () => {
                        // remove this val from k
                        const arr = lists[k].filter((v) => v !== val);
                        if (arr.length)
                            sp.set(k, arr.map(encodeURIComponent).join(","));
                        else sp.delete(k);
                        const url = new URL(location.href);
                        url.search = sp.toString();
                        history.pushState({}, "", url);
                        window.dispatchEvent(new Event("urlchange"));
                        renderChips();
                    });
                    chip.appendChild(x);
                    fr.appendChild(chip);
                }
            }
            chipsEl.innerHTML = "";
            if (count) chipsEl.appendChild(fr);
        }

        // Fire on popstate and when our app pushes URL updates
        const _ps = history.pushState;
        const _rs = history.replaceState;
        history.pushState = function (...args) {
            const r = _ps.apply(this, args);
            window.dispatchEvent(new Event("urlchange"));
            return r;
        };
        history.replaceState = function (...args) {
            const r = _rs.apply(this, args);
            window.dispatchEvent(new Event("urlchange"));
            return r;
        };

        // “Copy link” convenience
        const copyBtn = document.getElementById("copyView");
        if (copyBtn && navigator.clipboard) {
            copyBtn.addEventListener("click", async () => {
                try {
                    await navigator.clipboard.writeText(location.href);
                    copyBtn.textContent = "Copied!";
                    setTimeout(() => (copyBtn.textContent = "Copy link"), 1000);
                } catch {}
            });
        }

        window.addEventListener("popstate", renderChips);
        window.addEventListener("urlchange", renderChips);
        renderChips();
        // Canonicalize dir= when it matches default for the active sort
        window.addEventListener("urlchange", canonicalizeDirParam);
        window.addEventListener("popstate", canonicalizeDirParam);

        (function setupDirToggle() {
            const dirBtn = document.getElementById("dirToggle");
            if (!dirBtn) return;

            const defaultDirFor = (sort) =>
                defaultDirForSort(sort);

            const getSortAndDir = () => {
                const sp = new URLSearchParams(location.search);
                const sort = sp.get("sort") || "saved";
                const dir = sp.get("dir") || defaultDirFor(sort);
                return { sort, dir, sp };
            };

            const syncButton = () => {
                const { dir } = getSortAndDir();
                dirBtn.textContent = dir === "desc" ? "↓" : "↑";
                dirBtn.title =
                    dir === "desc"
                        ? "Sorting: Descending"
                        : "Sorting: Ascending";
                dirBtn.setAttribute(
                    "aria-pressed",
                    dir === "desc" ? "true" : "false",
                );
            };

            const setDir = (nextDir) => {
                const { sort, sp } = getSortAndDir();
                // keep URLs tidy: omit ?dir= when it matches the default for this sort
                const def = defaultDirFor(sort);
                if (nextDir === def) sp.delete("dir");
                else sp.set("dir", nextDir);
                const url = new URL(location.href);
                url.search = sp.toString();
                history.pushState({}, "", url);
                window.dispatchEvent(new Event("urlchange"));
                syncButton();
                canonicalizeDirParam();
            };

            dirBtn.addEventListener("click", () => {
                const { dir } = getSortAndDir();
                setDir(dir === "desc" ? "asc" : "desc");
            });

            window.addEventListener("popstate", syncButton);
            window.addEventListener("urlchange", syncButton);
            syncButton();
        })();

        // Favs-first toggle
        const favBtn = document.getElementById("favFirst");
        if (favBtn) {
            const setLabel = () => {
                const sp = new URLSearchParams(location.search);
                favBtn.classList.toggle("primary", sp.get("favfirst") === "1");
            };
            favBtn.addEventListener("click", () => {
                const sp = new URLSearchParams(location.search);
                if (sp.get("favfirst") === "1") sp.delete("favfirst");
                else sp.set("favfirst", "1");
                const url = new URL(location.href);
                url.search = sp.toString();
                history.pushState({}, "", url);
                window.dispatchEvent(new Event("urlchange"));
                setLabel();
            });
            window.addEventListener("urlchange", setLabel);
            window.addEventListener("popstate", setLabel);
            setLabel();
        }

        // Randomize toggle
        (function setupRandomToggle() {
        const btn = document.getElementById("randomizeToggle");
        if (!btn) return;

        const sync = () => {
            const sp = new URLSearchParams(location.search);
            const on = sp.get("random") === "1";
            btn.classList.toggle("primary", on);
            btn.setAttribute("aria-pressed", on ? "true" : "false");
        };

        btn.addEventListener("click", () => {
            const sp = new URLSearchParams(location.search);
            if (sp.get("random") === "1") sp.delete("random");
            else sp.set("random", "1");
            const url = new URL(location.href);
            url.search = sp.toString();
            history.pushState({}, "", url);
            window.dispatchEvent(new Event("urlchange"));
            sync();
        });

        window.addEventListener("urlchange", sync);
        window.addEventListener("popstate", sync);
        sync();
        })();

        // ─── Tri-state view toggle: View All → Viewed → Hide Viewed → (cycle) ───
        (function setupViewToggle() {
        const btn = document.getElementById("hideViewedToggle");
        if (!btn) return;

        const getViewMode = (sp) => {
            const v = (sp.get("view") || "").toLowerCase();
            if (v === "viewed" || v === "unviewed") return v;
            // back-compat: ?hide_viewed=1 maps to unviewed
            if (sp.get("hide_viewed") === "1") return "unviewed";
            return "all";
        };

        const nextMode = (m) => (m === "all" ? "viewed" : m === "viewed" ? "unviewed" : "all");
        const labelFor = (m) => (m === "all" ? "View All" : m === "viewed" ? "Viewed" : "Hide Viewed");

        const setMode = (mode, replace = false) => {
            const sp = new URLSearchParams(location.search);
            if (mode === "all") {
            sp.delete("view");
            sp.delete("hide_viewed"); // canonicalize legacy param away
            } else {
            sp.set("view", mode);
            sp.delete("hide_viewed"); // canonicalize legacy param away
            }
            const url = new URL(location.href);
            url.search = sp.toString();
            (replace ? history.replaceState : history.pushState).call(history, {}, "", url);
            window.dispatchEvent(new Event("urlchange"));
        };

        const sync = () => {
            const sp = new URLSearchParams(location.search);
            let mode = getViewMode(sp);

            // If legacy ?hide_viewed=1 present without view=, canonicalize to view=unviewed
            if (!sp.get("view") && sp.get("hide_viewed") === "1") {
            setMode("unviewed", true /* replace */);
            mode = "unviewed";
            }

            btn.textContent = labelFor(mode);
            btn.setAttribute("aria-pressed", mode === "all" ? "false" : "true"); // binary press state is fine
            btn.dataset.viewMode = mode;
            btn.classList.toggle("primary", mode !== "all"); // keep your existing visual affordance
        };

        btn.addEventListener("click", () => {
            const sp = new URLSearchParams(location.search);
            const cur = getViewMode(sp);
            setMode(nextMode(cur));
        });

        window.addEventListener("urlchange", sync);
        window.addEventListener("popstate", sync);
        sync();
        })();
    })();
</script>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1Usjv4" prefix="r1" component-url="/Saved-Reddit/_astro/PostPage.C79pazpc.js" component-export="default" renderer-url="/Saved-Reddit/_astro/client.D2WMwoKK.js" props="{&quot;id&quot;:[0,&quot;1l5mpda&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;PostPage&quot;,&quot;value&quot;:true}" await-children><div class="container"><div class="card" style="margin-bottom:12px" aria-busy="true"><div class="skeleton" style="height:28px;width:70%;margin:6px 0" aria-hidden="true"></div><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px" aria-hidden="true"></div><div class="skeleton" style="height:220px;width:100%" aria-hidden="true"></div></div></div><!--astro:end--></astro-island>  </body></html>